# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://coffeescript.org/


$(document).ready ->
  ###
  $('#info').dotdotdot()

  $('#info').click ->
    alert("Clicked")

  alert "jTemplates is not loaded"  unless $.fn.dotdotdot()
  ###


$('#search').hover ->
    $('.search_icon_circle').fadeOut('fast')
    $('#search_icon_bar').fadeOut 'fast', ->
        $('#search').animate
            width: '200%'
            'margin-left': '-50%',
            200
            ->
                $('#search_box').width('200%')
                $('#search_box').animate
                    opacity: 1,
                    100 
                $('#search_button').width('200%')
                $('#search_button').animate
                    opacity: 1,
                    100
                    
,->
    $('#search_button').animate
          opacity: 0,
          100 
    $('#search_box').animate
          opacity: 0,
          100
          ->
              $('.search_icon_circle').fadeIn('slow')
              $('#search_icon_bar').fadeIn('slow')
              $('#search').animate
                  width: $('#search').parent().width()
                  'margin-left': 0,
                  500

num_projects = $('.module_bg').size()
current_height = 0
if $('html, body').scrollTop() is 0
        $('#prev_proj_triangle').css
            opacity: 0

$(window).scroll ->
    if !$(window).scrollTop()
        $('#prev_proj_triangle').css
            opacity: 0
        $('#next_proj_triangle').css
            opacity: 1
    else if $(window).scrollTop() + $(window).height() > $(document).height() - 200
        $('#next_proj_triangle').css
            opacity: 0
        $('#prev_proj_triangle').css
            opacity: 1
    else
        $('#prev_proj_triangle').css
            opacity: 1
        $('#next_proj_triangle').css
            opacity: 1
            



$('#next_proj_triangle').click ->
    if $(window).scrollTop() + $(window).height() < $(document).height()
        $('html, body').animate
            scrollTop: ($(window).scrollTop() + $('.module_bg').outerHeight(false) + $('.module_bg').offset().top)
            current_height += $('.module_bg').height()

$('#prev_proj_triangle').click ->
    $('html, body').animate
        scrollTop: ($(window).scrollTop() - ($('.module_bg').outerHeight(false) + $('.module_bg').offset().top) )
        current_height += $('.module_bg').height()

